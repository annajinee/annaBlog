---
title: "택배 접수 연계 및 반품 리펙토링"
layout: post
term: 2017.08 ~ 2018.05
headerImage: true
projects: true
category: project
externalLink: false
image: ../assets/images/recept.png
---

Java, JPA, RESTful API, MySQL, HTML5, TypeScript, Angular2, Linux (CentOS), Nginx, Proxy, Git

---

택배사 (CJ 대한통운 , 로젠 택배, KG로지스, 우체국) 연동 및 택배 접수 연계 API를 개발 담당하였습니다.
반품 서비스는 유지보수를 위하여 기존 Java Project 에서 Spring boot로 변경 하며 raw query에서 ORM형식으로 코드 리펙토링 하였습니다.
현재 쇼핑엔티와 더블유쇼핑에서 사용하고 있으며 초기 개발 후 유지보수 및 운영을 하고 있습니다.
우체국의 경우 별도의 업체 관리가 필요하여 Angular2를 이용한 관리자 웹 페이지를 개발하였습니다.

---

<img src="../assets/images/project4-0.png"><br>
<br>

<h4>주요 프로세스 정리</h4>

 <h5>택배 접수</h5>


 <pre>
 - 접수 가능 유효성 체크 후 접수, 결과 값 전송 (JSON)
   1. tier_Code유효성 체크
   2. 주문번호 중복여부 체크
   3. 전화번호-우편번호 하이픈(-)제거 및 숫자 유효성 체크
 </pre>

 <h5>접수 결과 값 폴링</h5>

 <pre>
 - pollingReception (접수 폴링) -> workerThread_Reception
   1. 유효한 tier code에서 처리 상태에 따라 결과 값 전송
   2. 전송 후 정상 회신일 경우, 상태값 변경
 </pre>

 <h5>접수 수정</h5>

 <pre>
 - 접수 수정 불가 유효성 체크 후 수정, 결과 값 전송 (JSON)
   1. TierCode 유효성체크
   2. 주문번호 유효성 체크
   3. 처리완료가 아닌 경우
 </pre>

 <h5>접수 조회</h5>

 <pre>
 - 접수 조회 유효성 체크 후 삭제, 결과 값 전송 (JSON)
   1. TierCode 유효성체크
   2. 주문번호 유효성 체크
 </pre>

 <h5>접수 삭제</h5>

 <pre>
 - 접수 삭제 불가 유효성 체크 후 삭제, 결과 값 전송 (JSON)
   1. TierCode 유효성체크
   2. 주문번호 유효성 체크
   3. 미완료인 경우
 </pre>

 <h5>맞교환 접수</h5>

 <pre>
 - 접수 가능 유효성 체크 후 접수, 결과 값 전송 (JSON)
   1. tier_Code유효성 체크
   2. 주문번호 중복여부 체크
   3. 전화번호-우편번호 하이픈(-)제거 및 숫자 유효성 체크
 </pre>

 <h5>맞교환 폴링</h5>

 <pre>
 - pollingExChange (접수 폴링) -> workerThread_Exchange
   1. 미처리일 경우, 접수 테이블에서 전 주문 건 정보 찾아 반품 처리
   2. 처리 완료 된 건들 결과 값 전송 후 DB 처리 (JSON call back)
 </pre>

 <h5>맞교환 접수 조회</h5>

 <pre>
 - 접수 가능 유효성 체크 후 접수, 결과 값 전송 (JSON)
   1. tier_Code유효성 체크
   2. 주문번호 유효성 체크
 </pre>


 <h5>맞교환 접수 삭제</h5>

 <pre>
 - 접수 삭제 불가 유효성 체크 후 삭제, 결과 값 전송 (JSON)
   1. TierCode 유효성체크
   2. 주문번호 유효성 체크
   3. 삭제여부 상태값 체크
 </pre>

 <h5>우체국 사용자 등록/조회/삭제/수정</h5>

 <pre>
 - postLinker로 전송 후, 결과 값 받아옴 (JSON)
 </pre>

 <h5>Tier_code 폴링</h5>

 <pre>
 - Tier_code 유효성 체크 위해, HashMap에 저장 후 비교 (유효성 체크 때마다 select시간 줄이기 위함)
 : 새벽 2시 refresh
 : 신규 tier_code추가 시, /refresh
 </pre>

 <h5>신용코드 유효성 체크 컨트롤러</h5>

 <pre>
 -  유효성 체크 후, 결과 값 전송 (JSON)
 </pre>
